<!--
COMPORTAMENTO ACTIVITY
Definisce l'interfaccia ed un comportamento di un activity vuota

-->

<script>

  var crudListBehaviorImpl= {
    onStart: function () {
      //TODO elements check
      this.endElement = this.$.end;
      this.$.fetcher.fetch();
    },
    onStop:function(){
      this.result = [];
    },
    _onResult:function(newValue){
      // console.log(newValue)
    },

    onRefresh: function () {
      this.$.fetcher.clear();
      this.$.fetcher.fetch();
    },

    onParChange:function(){

    },
    _sortByMe:function(e){
      console.log(e.target);
      var t= e.target.getAttribute('field');
      console.log('sorting by '+t);
      if(this.sortBy === t){
        if(this.sortMode === 'ASC'){this.sortMode ='DSC';}
        else{this.sortMode='ASC';}
      }else{
        this.sortBy   = t;
        this.sortMode='ASC';
      }
    },
    onSearch:function(q){
      this.searchQuery=q;
    },
    getUserUrl: function (user) {
      return 'users/view/' + user.id;
    },

    properties: {
      baseUrl: {type: String, value: '/users/collection', notify: true},
      endElement  : Object,
      sortBy      : String,
      sortMode    : String,
      searchQuery : String,
      pageSize    : String,
      result : {type: Array, observer:'_onResult'}
    }
  };

  var crudListBehavior = [appEventsBehavior,crudListBehaviorImpl];
</script>
