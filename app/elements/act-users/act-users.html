<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../activity-behavior/activity-behavior.html">
<link rel="import" href="users-list.html">
<link rel="import" href="users-single.html">

<dom-module id="act-users">
  <template>
    <users-list   list   ></users-list>
    <users-single single ></users-single>
  </template>
  <script>
    (function () {
      'use strict';
        Polymer({
          is: 'act-users',
          behaviors:[activityBehavior],

          onInit:function(){
            this.listView   = this.$$('[list]');
            this.singleView = this.$$('[single]');
          },

          onStart: function () {
            if(!!this.selected)
              try{
                this.selected.onStart();

              }catch(ex){}
          },

          onStop:function(){
            if(!!this.selected)
            try{
              this.selected.onStop();

            }catch(ex){}
          },
          setView:function(view){
            if(view === 'single'){
              this.selected = this.singleView;
              this.singleView.removeAttribute('hidden');
              this.listView.setAttribute('hidden',true);

            }else{
              this.selected = this.listView;
              this.listView.removeAttribute('hidden');
              this.singleView.setAttribute('hidden',true);
            }
          },

          onParamsChange: function (newParams) {
            this.onStop();
            if(!!newParams){
              if(newParams.mode === 'create') {this.setView('single'); }
              if(newParams.mode === 'list')   {this.setView('list');   }
              else this.setView('single');
            }else{ this.setView('list');}

            this.onStart();
            console.log('user changed: ',newParams);
          },

          onRefresh: function () {

          },

          properties: {
            listView    : Object,
            singleView  : Object,
            selected    : Object
          }
        });
    })();
  </script>
</dom-module>
